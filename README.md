# Stop_images

Streamlit-приложение для пакетной подготовки TinEye URL по карточкам товаров.

## Логика работы

1. На вход подается ссылка на раздел сайта (вручную или через XLS/XLSX).
2. Приложение скрапит карточки товаров в разделе.
3. Для каждой карточки:
   - определяет, есть ли товар в наличии,
   - извлекает артикул,
   - извлекает главное изображение товара (без технических картинок/иконок).
4. Формирует TinEye URL запроса в формате `https://tineye.com/search?url=...`.
5. Записывает данные в XLSX.

> Важно: парсинг страницы результатов TinEye **не выполняется**.

## Формат отчета

Колонки строго в таком порядке:

1. `Артикул`
2. `Ссылка на сайт`
3. `TinEye URL запроса`

## Какие товары попадают в отчет

В отчет попадают только карточки:

- для которых удалось извлечь главное изображение,
- которые определены как "в наличии".

Карточки "нет в наличии" пропускаются.

## Разбиение отчетов по 50 строк

Если в разделе найдено больше 50 подходящих карточек, отчет автоматически делится на несколько XLSX-файлов:

- 1 файл: строки 1–50
- 2 файл: 51–100
- 3 файл: 101–150
- и т.д.

Имена файлов формируются из категории 2-го уровня URL раздела:

- `имякатегории.xlsx` — если файл один,
- `имякатегории_1.xlsx`, `имякатегории_2.xlsx`, ... — если файлов несколько.

## Входные данные

- Ручной ввод URL разделов (по одному URL на строку).
- Загрузка XLS/XLSX с колонкой ссылки на раздел.
- Автосопоставление заголовков поддерживается (без учета регистра, пробелов, `ё=е`).

## Запуск

```bash
pip install -r requirements.txt
streamlit run app.py
```

## Интерфейс

- Блок ввода URL разделов (или загрузки XLS/XLSX).
- Кнопка запуска формирования отчетов.
- Кнопка **«Стоп»** для остановки обработки.
- Живые логи обработки в интерфейсе.
- Скачивание:
  - одного XLSX, если отчет один,
  - ZIP с несколькими XLSX, если файлов несколько.
