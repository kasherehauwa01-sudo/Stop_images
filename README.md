# Stop_images

Streamlit-приложение для проверки изображений по новой механике:

1. На вход дается ссылка на **раздел сайта**.
2. Приложение скрапит ссылки на карточки товаров в разделе.
3. Для каждой карточки извлекает артикул и изображение.
4. Выполняет поиск изображения через TinEye (скрапинг результатов).
5. Если среди результатов есть домены из `stocks_config.json`, добавляет запись в отчет.

## Отчет XLSX

Колонки отчета:

1. `Артикул товара`
2. `Ссылка на сайт`
3. `Ссылка на сток`

`Ссылка на сток` берется из результатов TinEye (любая подходящая ссылка, попавшая в список стоков).

## Входные данные

- Ручной ввод URL разделов (по одному на строку).
- Загрузка XLS/XLSX с колонкой ссылки на раздел.

Автосопоставление заголовков поддерживается (без учета регистра, пробелов, `ё=е`).

## Настройка

```bash
pip install -r requirements.txt
streamlit run app.py
```

Опционально в `.streamlit/secrets.toml`:

```toml
TINEYE_BASE_URL = "https://tineye.com"
```

## Важно

- Ошибки отдельных карточек не останавливают обработку.
- Кэш и прогресс партий сохраняются в SQLite (`cache.db`).
