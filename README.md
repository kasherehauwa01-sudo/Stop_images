# Stop_images

Streamlit-приложение для пакетной проверки изображений по **ссылке на страницу сайта** через скрапинг результатов TinEye.

## Что делает приложение

- Принимает на вход ссылку на страницу товара (вручную или через XLS/XLSX).
- На странице автоматически находит изображение (`og:image`, либо наиболее подходящий `<img>`).
- Извлекает артикул товара со страницы (meta `sku`/`product:retailer_item_id` или из типовых блоков).
- Выполняет поиск совпадений изображения в TinEye (режим скрапинга страницы результатов).
- Фильтрует совпадения по списку стоков из `stocks_config.json`.
- Формирует XLSX-отчет только с совпадениями на стоках.

## Колонки итогового отчета

Строго две колонки:

1. `Ссылка на сток`
2. `Артикул товара`

## Настройка

1. Установите зависимости:

```bash
pip install -r requirements.txt
```

2. (Опционально) укажите базовый URL TinEye в `.streamlit/secrets.toml`:

```toml
TINEYE_BASE_URL = "https://tineye.com"
```

3. Запуск:

```bash
streamlit run app.py
```

## Примечания

- Ошибки отдельных строк не останавливают партию.
- Кэш результатов и прогресс хранятся в SQLite (`cache.db`).
- Входной XLS может содержать произвольные названия колонок, но должна быть колонка со ссылкой на страницу.
